<div class="row">
    <div class="col-sm-12">
        <?= view('admin/includes/_messages'); ?>
    </div>
</div>
<div class="row">
    <div class="col-lg-6 col-md-12">
        <div class="box box-primary">
            <div class="box-header with-border">
                <div class="left">
                    <h3 class="box-title"><?= trans("add_api"); ?></h3>
                </div>
                <div class="right">
                    <a href="<?= adminUrl('apiler'); ?>" class="btn btn-success btn-add-new">
                        <i class="fa fa-bars"></i>
                        <?= trans("api"); ?>
                    </a>
                </div>
            </div>
            <form action="<?= base_url('Admin/addApiPost'); ?>" method="post">
                <div class="box-body">
                    <div class="form-group">
                        <label>api_name</label>
                        <div class="input-group">
                            <input type="text" name="api_name" id="api_name" class="form-control auth-form-input" placeholder="api_name" value="<?= old("api_name"); ?>" required>
                            <span class="input-group-btn">
                                <button class="btn btn-info" type="button" onclick="openApiKeyPanel()">
                                    <i class="fa fa-external-link-alt"></i> API Key Paneli
                                </button>
                            </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>api_key</label>
                        <input type="text" name="api_key" id="api_key" class="form-control auth-form-input" placeholder="api_key" value="<?= old("api_key"); ?>" required onclick="copyToClipboard('api_key')">
                    </div>
                    <div class="form-group">
                        <label>secret_key </label>
                        <input type="text" name="secret_key" id="secret_key" class="form-control auth-form-input" placeholder="secret_key" value="<?= old("secret_key"); ?>" required onclick="copyToClipboard('secret_key')">
                    </div>

                </div>
                <div class="box-footer">
                    <button type="submit" class="btn btn-primary pull-right"><?= trans('add_api'); ?></button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function openApiKeyPanel() {
        var apiName = document.getElementById('api_name').value;  // api_name input değerini al
        var url = 'https://ebubekirbastama.com.tr/ebsapikeygenerater.html?api_name=' + encodeURIComponent(apiName);  // URL'yi parametre ile oluştur
        window.open(url, '_blank', 'width=800,height=600');  // Yeni pencerede aç
    }

    // Copy to clipboard function
    function copyToClipboard(elementId) {
        var copyText = document.getElementById(elementId);  // Tıklanan input elemanını al
        copyText.select();  // Seçme işlemi yap
        document.execCommand("copy");  // Kopyalama işlemi
        alert(elementId + " kopyalandı!");  // Kullanıcıya uyarı göster
    }
</script>
