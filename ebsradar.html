<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Türkiye Trafik Uygulamaları Haritası</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .highlight {
      background-color: #ffeeba !important;
      transition: background-color 0.6s ease;
    }
  </style>
  <!-- amCharts Kütüphaneleri -->
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/geodata/turkeyLow.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
</head>
<body>
<div class="container my-4">
  <h2 class="text-center">Türkiye Trafik Uygulamaları</h2>
  <div id="map" style="width: 100%; height: 500px;"></div>

  <div class="table-responsive mt-4">
    <table id="dataTable" class="table table-bordered table-striped table-hover align-middle">
      <thead class="table-dark text-center">
        <tr>
          <th>İl Adı</th>
          <th>Radarlı Trafik Uygulaması</th>
          <th>Radarsız Trafik Uygulaması</th>
        </tr>
      </thead>
      <tbody>
        <tr id="Adana"><td>Adana</td><td>12</td><td>30</td></tr>
        <tr id="Adıyaman"><td>Adıyaman</td><td>3</td><td>4</td></tr>
        <tr id="Afyonkarahisar"><td>Afyonkarahisar</td><td>6</td><td>16</td></tr>
        <tr id="Ağrı"><td>Ağrı</td><td>1</td><td>8</td></tr>
        <tr id="Amasya"><td>Amasya</td><td>10</td><td>11</td></tr>
        <tr id="Ankara"><td>Ankara</td><td>37</td><td>33</td></tr>
        <tr id="Antalya"><td>Antalya</td><td>25</td><td>34</td></tr>
        <tr id="Artvin"><td>Artvin</td><td>2</td><td>8</td></tr>
        <tr id="Aydın"><td>Aydın</td><td>8</td><td>23</td></tr>
        <tr id="Balıkesir"><td>Balıkesir</td><td>9</td><td>24</td></tr>
        <tr id="Bilecik"><td>Bilecik</td><td>11</td><td>4</td></tr>
        <tr id="Bingöl"><td>Bingöl</td><td>3</td><td>6</td></tr>
        <tr id="Bitlis"><td>Bitlis</td><td>5</td><td>5</td></tr>
        <tr id="Bolu"><td>Bolu</td><td>7</td><td>14</td></tr>
        <tr id="Burdur"><td>Burdur</td><td>7</td><td>6</td></tr>
        <tr id="Bursa"><td>Bursa</td><td>11</td><td>50</td></tr>
        <tr id="Çanakkale"><td>Çanakkale</td><td>6</td><td>26</td></tr>
        <tr id="Çankırı"><td>Çankırı</td><td>3</td><td>8</td></tr>
        <tr id="Çorum"><td>Çorum</td><td>11</td><td>7</td></tr>
        <tr id="Denizli"><td>Denizli</td><td>11</td><td>22</td></tr>
        <tr id="Diyarbakır"><td>Diyarbakır</td><td>4</td><td>8</td></tr>
        <tr id="Edirne"><td>Edirne</td><td>7</td><td>8</td></tr>
        <tr id="Elazığ"><td>Elazığ</td><td>3</td><td>8</td></tr>
        <tr id="Erzincan"><td>Erzincan</td><td>12</td><td>6</td></tr>
        <tr id="Erzurum"><td>Erzurum</td><td>4</td><td>18</td></tr>
        <tr id="Eskişehir"><td>Eskişehir</td><td>12</td><td>10</td></tr>
        <tr id="Gaziantep"><td>Gaziantep</td><td>19</td><td>13</td></tr>
        <tr id="Giresun"><td>Giresun</td><td>3</td><td>17</td></tr>
        <tr id="Gümüşhane"><td>Gümüşhane</td><td>3</td><td>5</td></tr>
        <tr id="Hakkari"><td>Hakkari</td><td>1</td><td>5</td></tr>
        <tr id="Hatay"><td>Hatay</td><td>5</td><td>29</td></tr>
        <tr id="Isparta"><td>Isparta</td><td>2</td><td>8</td></tr>
        <tr id="Mersin"><td>Mersin</td><td>12</td><td>55</td></tr>
        <tr id="İstanbul"><td>İstanbul</td><td>21</td><td>69</td></tr>
        <tr id="İzmir"><td>İzmir</td><td>45</td><td>113</td></tr>
        <tr id="Kars"><td>Kars</td><td>6</td><td>9</td></tr>
        <tr id="Kastamonu"><td>Kastamonu</td><td>7</td><td>6</td></tr>
        <tr id="Kayseri"><td>Kayseri</td><td>13</td><td>11</td></tr>
        <tr id="Kırklareli"><td>Kırklareli</td><td>4</td><td>16</td></tr>
        <tr id="Kırşehir"><td>Kırşehir</td><td>6</td><td>3</td></tr>
        <tr id="Kocaeli"><td>Kocaeli</td><td>24</td><td>49</td></tr>
        <tr id="Konya"><td>Konya</td><td>40</td><td>27</td></tr>
        <tr id="Kütahya"><td>Kütahya</td><td>10</td><td>11</td></tr>
        <tr id="Malatya"><td>Malatya</td><td>16</td><td>14</td></tr>
        <tr id="Manisa"><td>Manisa</td><td>21</td><td>27</td></tr>
        <tr id="Kahramanmaraş"><td>Kahramanmaraş</td><td>17</td><td>27</td></tr>
        <tr id="Mardin"><td>Mardin</td><td>3</td><td>24</td></tr>
        <tr id="Muğla"><td>Muğla</td><td>17</td><td>21</td></tr>
        <tr id="Muş"><td>Muş</td><td>1</td><td>8</td></tr>
        <tr id="Nevşehir"><td>Nevşehir</td><td>9</td><td>8</td></tr>
        <tr id="Niğde"><td>Niğde</td><td>17</td><td>8</td></tr>
        <tr id="Ordu"><td>Ordu</td><td>6</td><td>13</td></tr>
        <tr id="Rize"><td>Rize</td><td>2</td><td>11</td></tr>
        <tr id="Sakarya"><td>Sakarya</td><td>7</td><td>33</td></tr>
        <tr id="Samsun"><td>Samsun</td><td>13</td><td>33</td></tr>
        <tr id="Siirt"><td>Siirt</td><td>4</td><td>2</td></tr>
        <tr id="Sinop"><td>Sinop</td><td>4</td><td>9</td></tr>
        <tr id="Sivas"><td>Sivas</td><td>15</td><td>23</td></tr>
        <tr id="Tekirdağ"><td>Tekirdağ</td><td>11</td><td>16</td></tr>
        <tr id="Tokat"><td>Tokat</td><td>13</td><td>23</td></tr>
        <tr id="Trabzon"><td>Trabzon</td><td>2</td><td>8</td></tr>
        <tr id="Tunceli"><td>Tunceli</td><td>3</td><td>5</td></tr>
        <tr id="Şanlıurfa"><td>Şanlıurfa</td><td>16</td><td>15</td></tr>
        <tr id="Uşak"><td>Uşak</td><td>5</td><td>7</td></tr>
        <tr id="Van"><td>Van</td><td>2</td><td>10</td></tr>
        <tr id="Yozgat"><td>Yozgat</td><td>1</td><td>5</td></tr>
        <tr id="Zonguldak"><td>Zonguldak</td><td>2</td><td>7</td></tr>
        <tr id="Aksaray"><td>Aksaray</td><td>9</td><td>6</td></tr>
        <tr id="Bayburt"><td>Bayburt</td><td>1</td><td>2</td></tr>
        <tr id="Karaman"><td>Karaman</td><td>7</td><td>6</td></tr>
        <tr id="Kırıkkale"><td>Kırıkkale</td><td>1</td><td>8</td></tr>
        <tr id="Batman"><td>Batman</td><td>1</td><td>9</td></tr>
        <tr id="Şırnak"><td>Şırnak</td><td>2</td><td>12</td></tr>
        <tr id="Bartın"><td>Bartın</td><td>2</td><td>5</td></tr>
        <tr id="Ardahan"><td>Ardahan</td><td>4</td><td>2</td></tr>
        <tr id="Iğdır"><td>Iğdır</td><td>0</td><td>6</td></tr>
        <tr id="Yalova"><td>Yalova</td><td>5</td><td>3</td></tr>
        <tr id="Karabük"><td>Karabük</td><td>1</td><td>6</td></tr>
        <tr id="Kilis"><td>Kilis</td><td>4</td><td>4</td></tr>
        <tr id="Osmaniye"><td>Osmaniye</td><td>2</td><td>22</td></tr>
        <tr id="Düzce"><td>Düzce</td><td>8</td><td>17</td></tr>
        <tr id="TOPLAM" class="table-secondary fw-bold"><td>TOPLAM</td><td>705</td><td>1308</td></tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  am5.ready(function() {
    var root = am5.Root.new("map");
    root.setThemes([am5themes_Animated.new(root)]);

    var chart = root.container.children.push(
      am5map.MapChart.new(root, {
        panX: "none",
        panY: "none",
        wheelX: "none",
        wheelY: "none",
        projection: am5map.geoMercator()
      })
    );

    var polygonSeries = chart.series.push(
      am5map.MapPolygonSeries.new(root, {
        geoJSON: am5geodata_turkeyLow,
        valueField: "value",
        calculateAggregates: true
      })
    );

    polygonSeries.mapPolygons.template.setAll({
      tooltipText: "{name}",
      interactive: true
    });

    polygonSeries.mapPolygons.template.events.on("click", function(ev) {
      let il = ev.target.dataItem.dataContext.name;
      let ilId = document.getElementById(il);
      if (ilId) {
        document.querySelectorAll("tr").forEach(row => row.classList.remove("highlight"));
        ilId.classList.add("highlight");
        ilId.scrollIntoView({ behavior: 'smooth', block: 'center' });
      } else {
        alert(il + " için veri bulunamadı.");
      }
    });

    polygonSeries.data.setAll([]);
  });
</script>
</body>
</html>
