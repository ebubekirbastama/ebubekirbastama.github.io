<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toplu WebP DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: url('https://ebubekirbastama.com.tr/circles.webp');
    }
  </style>
</head>

<body>
  <div class="container mt-5">
    <h1 class="text-center">Toplu WebP DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼</h1>
    <p class="text-center text-muted">ğŸ“· Resimlerinizi seÃ§in ve sÄ±kÄ±ÅŸtÄ±rÄ±lmÄ±ÅŸ WebP formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n!</p>

    <!-- Resim SeÃ§imi -->
    <div class="mb-3">
      <label for="imageInput" class="form-label">Resim DosyalarÄ±:</label>
      <input class="form-control" type="file" id="imageInput" accept="image/*" multiple>
    </div>
    <button class="btn btn-primary w-100" id="convertBtn">DÃ¶nÃ¼ÅŸtÃ¼r ve ZIP Ä°ndir</button>

    <!-- Progress Bar -->
    <div class="progress mt-4" style="height: 25px; display: none;" id="progressContainer">
      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" id="progressBar" style="width: 0%;">
        0%
      </div>
    </div>

    <!-- Ä°ÅŸlem Durumu -->
    <div id="status" class="mt-3 text-center"></div>

    <!-- AÃ§Ä±klama BÃ¶lÃ¼mÃ¼ -->
    <div class="mt-5 p-4 border rounded bg-light">
      <h3 class="text-center mb-3">âœ¨ NasÄ±l KullanÄ±lÄ±r?</h3>
      <ul class="list-unstyled">
        <li>âœ… <b>AdÄ±m 1:</b> BilgisayarÄ±nÄ±zdan birden fazla resim seÃ§mek iÃ§in yukarÄ±daki dosya seÃ§im alanÄ±nÄ± kullanÄ±n.</li>
        <li>âœ… <b>AdÄ±m 2:</b> "DÃ¶nÃ¼ÅŸtÃ¼r ve ZIP Ä°ndir" butonuna tÄ±klayÄ±n.</li>
        <li>âœ… <b>AdÄ±m 3:</b> DÃ¶nÃ¼ÅŸtÃ¼rÃ¼len tÃ¼m resimler bir ZIP dosyasÄ± olarak otomatik indirilir.</li>
      </ul>
      <h3 class="text-center mt-4 mb-3">ğŸ¯ Neden KullanmalÄ±sÄ±nÄ±z?</h3>
      <ul>
        <li>ğŸŒŸ <b>WebP SÄ±kÄ±ÅŸtÄ±rma:</b> WebP formatÄ±, dosya boyutlarÄ±nÄ± kÃ¼Ã§Ã¼ltÃ¼r ve web sitelerinizin daha hÄ±zlÄ± yÃ¼klenmesini saÄŸlar.</li>
        <li>ğŸŒŸ <b>Modern Ã‡Ã¶zÃ¼m:</b> TÃ¼m tarayÄ±cÄ±larla uyumlu, yÃ¼ksek kaliteli ve optimize edilmiÅŸ resimler elde edersiniz.</li>
        <li>ğŸŒŸ <b>HÄ±zlÄ± ve GÃ¼venli:</b> TarayÄ±cÄ± Ã¼zerinde Ã§alÄ±ÅŸtÄ±ÄŸÄ± iÃ§in resimleriniz baÅŸka bir yere gÃ¶nderilmez.</li>
      </ul>
      <h3 class="text-center mt-4 mb-3">ğŸ’¡ KullanÄ±m AvantajlarÄ±</h3>
      <ul>
        <li>âš¡ <b>Toplu Ä°ÅŸlem:</b> Birden fazla dosyayÄ± aynÄ± anda dÃ¶nÃ¼ÅŸtÃ¼rme imkanÄ±.</li>
        <li>âš¡ <b>Boyut Azaltma:</b> DosyalarÄ±n boyutunu %50-75 oranÄ±nda kÃ¼Ã§Ã¼ltme.</li>
        <li>âš¡ <b>KullanÄ±cÄ± Dostu:</b> Basit ve anlaÅŸÄ±lÄ±r bir arayÃ¼z.</li>
      </ul>
      <p class="text-center mt-4"><b>ğŸ’» Herkes iÃ§in tasarlandÄ±!</b> Hem geliÅŸtiriciler hem de gÃ¼nlÃ¼k kullanÄ±cÄ±lar iÃ§in mÃ¼kemmel bir araÃ§.</p>
    </div>
  </div>

  <!-- JSZip ve FileSaver -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script>
    document.getElementById('convertBtn').addEventListener('click', async () => {
      const input = document.getElementById('imageInput');
      const progressBar = document.getElementById('progressBar');
      const progressContainer = document.getElementById('progressContainer');
      const statusDiv = document.getElementById('status');

      progressContainer.style.display = 'block'; // Ä°lerleme Ã§ubuÄŸunu gÃ¶ster
      progressBar.style.width = '0%';
      progressBar.textContent = '0%';
      statusDiv.innerHTML = '';

      if (input.files.length === 0) {
        alert("LÃ¼tfen en az bir resim dosyasÄ± seÃ§in.");
        progressContainer.style.display = 'none'; // Ä°lerleme Ã§ubuÄŸunu gizle
        return;
      }

      const zip = new JSZip(); // Yeni bir ZIP dosyasÄ± oluÅŸtur
      const totalFiles = input.files.length;

      for (let i = 0; i < totalFiles; i++) {
        const file = input.files[i];
        const imageUrl = URL.createObjectURL(file);
        const img = new Image();

        img.src = imageUrl;
        await img.decode();

        // Canvas Ã¼zerinden sÄ±kÄ±ÅŸtÄ±rma ve WebP dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0, img.width, img.height);

        // WebP formatÄ±na sÄ±kÄ±ÅŸtÄ±rma (%80 kalite)
        const webpDataUrl = canvas.toDataURL('image/webp', 0.8);

        // Data URL'den binary veri elde et
        const binaryData = atob(webpDataUrl.split(',')[1]);
        const arrayBuffer = new Uint8Array(binaryData.length);
        for (let j = 0; j < binaryData.length; j++) {
          arrayBuffer[j] = binaryData.charCodeAt(j);
        }

        // ZIP dosyasÄ±na ekle
        const fileName = file.name.replace(/\.[^/.]+$/, ".webp"); // .webp uzantÄ±sÄ±nÄ± ekler
        zip.file(fileName, arrayBuffer);

        // Ä°lerleme gÃ¼ncellemesi
        const progress = Math.round(((i + 1) / totalFiles) * 100);
        progressBar.style.width = `${progress}%`;
        progressBar.textContent = `${progress}%`;
        statusDiv.innerHTML = `DÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼yor: ${file.name} (${i + 1}/${totalFiles})`;

        // BelleÄŸi temizle
        URL.revokeObjectURL(imageUrl);
      }

      // ZIP dosyasÄ±nÄ± oluÅŸtur ve indir
      statusDiv.innerHTML = "Dosyalar sÄ±kÄ±ÅŸtÄ±rÄ±lÄ±yor...";
      zip.generateAsync({
        type: "blob"
      }).then((content) => {
        saveAs(content, "dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmÃ¼ÅŸ_resimler.zip"); // ZIP dosyasÄ±nÄ± indir
        progressBar.style.width = '100%';
        progressBar.textContent = 'TamamlandÄ±!';
        statusDiv.innerHTML = "TÃ¼m dosyalar baÅŸarÄ±yla dÃ¶nÃ¼ÅŸtÃ¼rÃ¼ldÃ¼ ve indirildi!";
      });
    });
  </script>
</body>

</html>
